(function() {
  'use strict';
  var RedirectRouter, should;

  should = require('should');

  RedirectRouter = require('../../lib/redirect_router');

  describe('RedirectRouter', function() {
    return describe('route', function() {
      return it('should populate node property', function(done) {
        var query;
        query = {
          node: {
            name: 'somenode',
            configuration: {
              redirect: 'redirectnode'
            }
          },
          graph: {
            node_manager: {
              find_node: function(redirect, callback) {
                return callback({
                  name: 'redirectnode'
                });
              }
            },
            query: function(query, callback) {
              query.node.name.should.equal('redirectnode');
              return done();
            }
          }
        };
        return RedirectRouter.route(query);
      });
    });
  });

}).call(this);
